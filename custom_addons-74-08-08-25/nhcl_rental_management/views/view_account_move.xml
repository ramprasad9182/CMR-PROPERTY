<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!--in rent invoice adding some fields-->
    <record id="view_add_invoice" model="ir.ui.view">
        <field name="name">invoice.add</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet/group//group[@id='header_left_group']" position="inside">
                <field name="nhcl_invoice_type" invisible="move_type not in ['out_invoice','out_refund']"
                       readonly="state != 'draft'"/>
                <field name="cam_fields" invisible="1"/>
                <field name="rs_amount" invisible=" nhcl_invoice_type not in ['rent'] or  move_type not in ['out_invoice','out_refund']" readonly="1"/>
                <field name="mg_amount" invisible="nhcl_invoice_type not in ['rent'] or  move_type not in ['out_invoice','out_refund']" readonly="1"/>
                <field name="slab_amount" invisible=" nhcl_invoice_type not in ['rent'] or  move_type not in ['out_invoice','out_refund']" readonly="1"/>

            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='price_unit']"
                   position="attributes">
                <attribute name="readonly">parent.nhcl_invoice_type in ['gas']</attribute>

            </xpath>
<!--             <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='price_unit']" position="after">-->
<!--                 <field name="tds"/>-->
<!--             </xpath>-->
            <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='product_id']"
                   position="after">
                <field name="opening_reading" column_invisible="parent.cam_fields != True"
                       readonly="parent.state != 'draft'"/>
                <field name="closing_reading" column_invisible="parent.cam_fields != True"
                       readonly="parent.state != 'draft'"/>
                <field name="consumption" column_invisible="parent.cam_fields != True"
                       readonly="parent.state != 'draft'"/>
                 <field name="multiplying_factor" column_invisible="parent.cam_fields != True"  readonly="parent.nhcl_invoice_type in ['gas']" force_save="1"/>
<!--                <field name="consumed_units" column_invisible="parent.cam_fields != True"-->
<!--                       readonly="parent.state != 'draft'"/>-->
                <field name="consumed_units"
                       column_invisible="parent.nhcl_invoice_type not in ['gas', 'electric','dg']"
                       readonly="parent.state != 'draft'"/>

                <field name="nhcl_area_units" column_invisible="parent.cam_fields == True" readonly="parent.state != 'draft'"/>
                <field name="net_rent" column_invisible="parent.nhcl_invoice_type != 'rs'"/>
                <field name="percentage" column_invisible="parent.nhcl_invoice_type != 'rs'"/>
                <field name="mg_carpet" column_invisible="parent.nhcl_invoice_type != 'mg'"/>
                <field name="mg_percentage" column_invisible="parent.nhcl_invoice_type != 'mg'"/>
                <field name="net_slab" column_invisible="parent.nhcl_invoice_type != 'slb'"/>
                <field name="percentage_slab" column_invisible="parent.nhcl_invoice_type != 'slb'"/>
                <field name="rate" column_invisible="parent.nhcl_invoice_type not in ['gas', 'electric','dg']"/>
            </xpath>
            <xpath expr="//button[@name='button_draft']" position="attributes">
                <attribute name="invisible">payment_state == 'partial' or payment_state == 'in_payment' or payment_state == 'paid'</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='quantity']" position="attributes">
                <attribute name="column_invisible">parent.cam_fields == True or parent.nhcl_invoice_type in ['rent','cam','gas','marketing','electric','rs','slb']</attribute>
            </xpath>
             <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='nhcl_area_units']" position="attributes">
                <attribute name="column_invisible">parent.nhcl_invoice_type in ['marketing','electric','gas','rs','slb','dg']</attribute>
            </xpath>
             <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='product_uom_id']" position="attributes">
                <attribute name="column_invisible">parent.nhcl_invoice_type in ['rs','rent','cam','marketing','electric','gas','slb','dg']</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='multiplying_factor']" position="attributes">
                <attribute name="column_invisible">parent.nhcl_invoice_type not in ['electric','gas','dg']</attribute>
            </xpath> <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='opening_reading']" position="attributes">
                <attribute name="column_invisible">parent.nhcl_invoice_type not in ['electric','gas','dg']</attribute>
            </xpath> <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='closing_reading']" position="attributes">
                <attribute name="column_invisible">parent.nhcl_invoice_type not in ['electric','gas','dg']</attribute>
            </xpath> <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='consumption']" position="attributes">
                <attribute name="column_invisible">parent.nhcl_invoice_type not in ['electric','gas','dg']</attribute>
            </xpath>
            <xpath expr="//field[@name='delivery_date']" position="after">
                <field name="months" invisible="move_type not in ['out_invoice','out_refund']"/>
                <field name="comparision_yr_mnth" invisible="move_type not in ['out_invoice','out_refund'] or nhcl_invoice_type not in ['rent','rs','electric']"/>
            </xpath>
<!--            <xpath expr="//field[@name='months']" position="attributes">-->
<!--                <attribute name="invisible">nhcl_invoice_type not in ['marketing','electric','gas']</attribute>-->
<!--            </xpath>-->
            <xpath expr="//field[@name='invoice_date']" position="after">
                 <field name="billing_from" invisible="nhcl_invoice_type  in ['electric','rs'] or  move_type not in ['out_invoice','out_refund']"/>
                <field name="billing_to" invisible="nhcl_invoice_type  in ['electric','rs'] or  move_type not in ['out_invoice','out_refund']"/>
            </xpath>
            <xpath expr="//field[@name='nhcl_invoice_type']" position="after">
<!--                <field name="rent_subtype" widget="radio" options="{'horizontal': True}" invisible="nhcl_invoice_type not in ['rent']"/>-->
                <field name="penality"/>
            </xpath>
             <xpath expr="//header" position="inside">
                <button name="send_email_invoice" type="object" string="Email" class="btn btn-secondary"/>
            </xpath>
            <xpath expr="//field[@name='penality']" position="attributes">
                <attribute name="invisible">nhcl_invoice_type not in ['rent'] or  move_type not in ['out_invoice','out_refund']</attribute>
            </xpath>
            <xpath expr="//field[@name='penality']" position="after">
                <field name="po_number_category"/>
                <field name="po_date"/>
                <field name="site_location_num"/>
            </xpath>
            <xpath expr="//field[@name='po_number_category']" position="attributes">
                <attribute name="invisible">nhcl_invoice_type not in ['marketing']</attribute>
            </xpath>
            <xpath expr="//field[@name='site_location_num']" position="attributes">
                <attribute name="invisible">nhcl_invoice_type not in ['marketing']</attribute>
            </xpath>
            <xpath expr="//field[@name='po_date']" position="attributes">
                <attribute name="invisible">nhcl_invoice_type not in ['marketing']</attribute>
            </xpath>
<!--             <xpath expr="//field[@name='billing_from']" position="attributes">-->
<!--                <attribute name="invisible">nhcl_invoice_type not in ['rent','cam']</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//field[@name='billing_to']" position="attributes">-->
<!--                <attribute name="invisible">nhcl_invoice_type not in ['rent','cam']</attribute>-->
<!--            </xpath>-->
            <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='product_id']" position="after">
                <field name="description2" column_invisible="parent.nhcl_invoice_type not in ['rent','cam']"/>
            </xpath>
            <xpath expr="//notebook//page[@name='invoice_tab']//group//group[1]//field[@name='tax_totals']" position="before">
                <field name="total_amount_show" invisible="1"/>
                <field name="discount_amount_show" invisible="1"/>
<!--                <field name="custom_amount_untaxed"/>-->
<!--                <field name="custom_tax"/>-->
            </xpath>
             <xpath expr="//notebook//page[@name='invoice_tab']//group//group[1]//field[@name='total_amount_show']" position="attributes">
                 <attribute name="invisible">nhcl_invoice_type not in ['rent']</attribute>
            </xpath>
            <xpath expr="//notebook//page[@name='invoice_tab']//group//group[1]//field[@name='discount_amount_show']" position="attributes">
                 <attribute name="invisible">nhcl_invoice_type not in ['rent']</attribute>
            </xpath>
<!--            <xpath expr="//notebook//page[@name='invoice_tab']//group//group[1]//field[@name='custom_tax']" position="attributes">-->
<!--                 <attribute name="invisible">nhcl_invoice_type not in ['electric']</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//notebook//page[@name='invoice_tab']//group//group[1]//field[@name='custom_amount_untaxed']" position="attributes">-->
<!--                 <attribute name="invisible">nhcl_invoice_type not in ['electric']</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//notebook//page[@name='invoice_tab']//group//group[1]//field[@name='amount_untaxed']" position="attributes">-->
<!--                 <attribute name="invisible">parent.nhcl_invoice_type  in ['electric']</attribute>-->
<!--            </xpath>-->




            <!--            <xpath expr="//header" position="inside">-->
            <!--                <button name="action_approve" type="object" string="Approve" groups="nhcl_rental_management.group_account_approval"-->
            <!--                        invisible="for_ammount"/>-->
            <!--            </xpath>-->
            <!--            <xpath expr="///form/sheet/group//group[@id='header_left_group']" position="inside">-->
            <!--                <field name="for_ammount" invisible="1"/>-->
            <!--                <field name="check_post" invisible="1"/>-->
            <!--            </xpath>-->
            <!--            <xpath expr="//header//button[2]" position="attributes">-->
            <!--                <attribute name="invisible">(not for_ammount and (state ,'!=','approve','posted')) or check_post </attribute>-->
            <!--            </xpath>-->
        </field>
    </record>
    <record id="view_add_invoice_account_inherit" model="ir.ui.view">
        <field name="name">Account.reset.inherit</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_draft']" position="attributes">
                <attribute name="invisible">'state', '=', 'paid'</attribute>
            </xpath>
        </field>
    </record>
<!--    <record id="view_add_invoice__button" model="ir.ui.view">-->
<!--        <field name="name">Account.draft.button.inherit</field>-->
<!--        <field name="model">account.move</field>-->
<!--        <field name="inherit_id" ref="base.view_model_form"/>-->
<!--        <field name="arch" type="xml">-->
<!--            <xpath expr="//header//button[@name='button_draft']" position="attributes">-->
<!--                <attribute name="invisible">'parent.state', '=', 'draft'</attribute>-->
<!--            </xpath>-->
<!--        </field>-->
<!--    </record>-->

</odoo>