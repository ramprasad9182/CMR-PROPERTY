<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <template id="my_custom_header">
            <t t-if="not o" t-set="o" t-value="doc"/>
            <t t-if="not company">
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
            </t>
            <div class="header" style="text-align: center;">
            </div>
            <div class="article" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
                 t-att-data-oe-lang="o and o.env.context.get('lang')">
                <t t-out="0"/>
            </div>
        </template>
        <template id="final_invoice_report_account_without_header">
            <t t-if="not o" t-set="o" t-value="doc"/>
            <t t-if="not company">
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id"/>
                </t>
                <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                    <t t-set="company" t-value="o.company_id.sudo()"/>
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company"/>
                </t>
            </t>
            <t t-foreach="docs" t-as="doc">
                <t t-call="nhcl_rental_management.my_custom_header">
                    <p style="font-size:10px; margin-left:650px; margin-top:0; font-family:Verdana, Arial,sans-serif;">
                        <b>CIN NO:</b>
                        <span t-field="company.nhcl_com_cin_no"/>
                        <br/>
                        <b>Director:</b>
                        <span t-field="company.nhcl_com__director_name"/>
                        <br/>
                        <b>DIN NO:</b>
                        <span t-field="company.nhcl_com_din_no"/>
                    </p>
                    <main>
                        <div class="page" style="margin-top: 5px;">
                            <!-- Header Section -->
                            <h3 style="text-align: center; margin: 0; font-weight: bold; font-family:Arial, Verdana,sans-serif;">
                                Tax Invoice
                            </h3>

                            <!-- Invoice Details Table -->
                            <table class="table table-bordered"
                               style="width: 100%; margin:0;padding:0; font-size: 10px;border:2px solid black; font-family:Arial, Verdana,sans-serif;">
                            <tr>
                                <td>
                                    <strong>Tenant</strong>
                                </td>
                                <td>
                                    <span t-field="doc.partner_id.name"/>
                                </td>
                                <td>
                                    <strong>Company</strong>
                                </td>
                                <td>
                                    <span t-field="company.name"/>
                                </td>
                                <!--                                <td>-->
                                <!--                                    <strong>Brand Name</strong>-->
                                <!--                                </td>-->
                                <!--                                <td>-->
                                <!--                                    <span t-field="doc.tenancy_id.brand_name"/>-->
                                <!--                                </td>-->
                            </tr>
                            <tr>
                                <td>
                                    <strong>Address</strong>
                                </td>
                                <td>
                                    <span t-field="doc.partner_id.city"/>
                                    -
                                    <span t-field="doc.partner_id.state_id"/>
                                    (<span t-field="doc.partner_id.zip"/>)
                                </td>
                                <td>
                                    <strong>Billing Period</strong>
                                </td>
                                <td>
                                    <t t-if="doc.invoice_month_range">
                                        <span t-field="doc.invoice_month_range"/>
                                    </t>
                                    <t t-else="">
                                        No Invoice Date
                                    </t>
                                </td>

                            </tr>
                            <tr>
                                <td>
                                    <strong>Tenant PAN No</strong>
                                </td>
                                <td>
                                    <t t-esc="doc.partner_id.l10n_in_pan"/>
                                </td>
                                <td><strong>Invoice Number</strong></td>
                                <td>
                                    <span t-field="doc.name"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>State</strong>
                                </td>
                                <td>
                                    <span t-field="doc.partner_id.state_id"/>
                                </td>

                                <td>
                                    <strong>Invoice Date</strong>
                                </td>
                                <td>
                                    <span t-field="doc.invoice_date"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>State Code</strong>
                                </td>
                                <td>
                                    <t t-esc="company.state_id.code"/>
                                </td>
                                <td>
                                    <strong>Due Date</strong>
                                </td>
                                <td>
                                    <span t-field="doc.invoice_date_due"/>
                                </td>

                            </tr>
                            <tr>
                                <td><strong>Tax ID</strong></td>
                                <td>
                                    <span t-field="doc.partner_id.vat"/>
                                </td>
                                <td>
                                    <strong>PAN Number</strong>
                                </td>
                                <td>
                                    <t t-esc="company.company_registry"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Unit No</strong>
                                </td>
                                <td>
                                    <span t-field="doc.tenancy_id.unit_no"/>
                                </td>
                                <td>
                                    <strong>GST IN</strong>
                                </td>
                                <td>
                                    <span t-field="doc.partner_id.vat"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Chargeable Area</strong>
                                </td>
                                <td>
                                    <span t-field="doc.tenancy_id.chargeable_area"/>
                                </td>
                                <td>
                                    <strong>State</strong>
                                </td>
                                <td>
                                    <span t-field="doc.partner_id.state_id"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Carpet Area</strong>
                                </td>
                                <td>
                                    <span t-field="doc.tenancy_id.carpet_area"/>
                                </td>
                                <td>
                                    <strong>State Code</strong>
                                </td>
                                <td>
                                    <span t-field="doc.partner_id.zip"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Place of Supply</strong>
                                </td>
                                <td>
                                    <span t-field="doc.l10n_in_state_id.name"/>
                                </td>
                                <td>
                                    <strong>SAC Code</strong>
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Brand Name</strong>
                                </td>
                                <td>
                                    <span t-field="doc.tenancy_id.brand_name"/>
                                </td>
                                <!--                                <td>Invoice Number</td>-->
                                <td></td>
                                <td>
                                    <!--                                    <span t-field="doc.name"/>-->
                                </td>
                            </tr>
                        </table>
                            <table class="table table-sm table-bordered"
                                   style="width: 100%; margin: 0; padding:0; font-size: 10px; border: 2px solid black; font-family: Arial, Verdana, sans-serif; text-align: center;">
                                <thead>
                                    <tr>
                                        <th rowspan="2">
                                            <strong>Description</strong>
                                        </th>
                                        <t t-if="doc.nhcl_invoice_type == 'cam'">
                                            <td rowspan="2">
                                                <strong>Opening Date</strong>
                                            </td>
                                            <td rowspan="2">
                                                <strong>Closing Date</strong>
                                            </td>
                                            <td rowspan="2">
                                                <strong>Consumption</strong>
                                            </td>
                                            <td rowspan="2">
                                                <strong>Consumed Units</strong>
                                            </td>
                                        </t>
                                        <th rowspan="2">
                                            <strong>Area Units</strong>
                                        </th>
                                        <th rowspan="2">
                                            <strong>Rate</strong>
                                        </th>
                                        <th rowspan="2">
                                            <strong>Total Value</strong>
                                        </th>
                                        <th rowspan="2">
                                            <strong>Taxable Value</strong>
                                        </th>
                                        <th colspan="2">
                                            <strong>CGST</strong>
                                        </th>
                                        <th colspan="2">
                                            <strong>SGST</strong>
                                        </th>
                                    </tr>
                                    <t t-if="doc.nhcl_invoice_type == 'cam'">
                                        <tr>
                                            <!--                                    <th colspan="9"></th>-->
                                            <th>Rate</th>
                                            <th>Amount</th>
                                            <th>Rate</th>
                                            <th>Amount</th>
                                        </tr>
                                    </t>
                                    <t t-else="">
                                        <tr>
                                            <!--                                    <th colspan="5"></th>-->
                                            <th>Rate</th>
                                            <th>Amount</th>
                                            <th>Rate</th>
                                            <th>Amount</th>
                                        </tr>
                                    </t>
                                </thead>
                                <tbody>
                                    <!-- Line Items -->
                                    <t t-foreach="doc.invoice_line_ids" t-as="line">
                                        <tr>
                                            <td style="text-align: left;">
                                                <span t-field="line.product_id.name"/>(<span t-field="line.name"/>)
                                            </td>

                                            <!-- Show fields only if the invoice type is 'cam' -->
                                            <t t-if="doc.nhcl_invoice_type == 'cam'">
                                                <td>
                                                    <span t-field="line.opening_reading"/>
                                                </td>
                                                <td>
                                                    <span t-field="line.closing_reading"/>
                                                </td>
                                                <td>
                                                    <span t-field="line.consumption"/>
                                                </td>
                                                <td>
                                                    <span t-field="line.consumed_units"/>
                                                </td>
                                            </t>
                                            <td>
                                                <span t-field="line.nhcl_area_units"/>
                                            </td>

                                            <td>
                                                <span t-esc="'{:,.2f}'.format(line.price_unit)"/>
                                            </td>
                                            <td>
                                                <span t-esc="'{:,.2f}'.format(line.price_total)"/>
                                            </td>
                                            <td>
                                                <t t-esc="'{:,.2f}'.format(sum(line.mapped('price_total')) - sum(line.mapped('price_subtotal')))"/>
                                            </td>

                                            <td>
                                                <t t-foreach="line.tax_ids.filtered(lambda tax: 'GST' in tax.name)"
                                                   t-as="gst_tax">
                                                    <t t-esc="gst_tax.amount / 2"/>%
                                                </t>
                                            </td>
                                            <td>
                                                <t t-foreach="line.tax_ids.filtered(lambda tax: 'GST' in tax.name)"
                                                   t-as="gst_tax">
                                                    <t t-esc="round((line.price_total - line.price_subtotal) / 2, 2) if gst_tax else 0.0"/>
                                                </t>
                                            </td>
                                            <td>
                                                <t t-foreach="line.tax_ids.filtered(lambda tax: 'GST' in tax.name)"
                                                   t-as="gst_tax">
                                                    <t t-esc="gst_tax.amount / 2"/>%
                                                </t>
                                            </td>
                                            <td>
                                                <t t-foreach="line.tax_ids.filtered(lambda tax: 'GST' in tax.name)"
                                                   t-as="gst_tax">
                                                    <t t-esc="round((line.price_total - line.price_subtotal) / 2, 2) if gst_tax else 0.0"/>
                                                </t>
                                            </td>
                                        </tr>
                                    </t>
                                    <!-- Total Row -->
                                    <tr>
                                        <td>
                                            <strong>Total</strong>
                                        </td>
                                        <t t-if="doc.nhcl_invoice_type == 'cam'">
                                            <td colspan="6"></td>
                                        </t>
                                        <t t-else="">
                                            <td colspan="2"></td>
                                        </t>
                                        <td>
                                            <t t-esc="'{:,.2f}'.format(sum(doc.invoice_line_ids.mapped('price_total')))"/>
                                        </td>
                                        <td>
                                            <t t-esc="'{:,.2f}'.format(sum(doc.invoice_line_ids.mapped('price_total')) - sum(doc.invoice_line_ids.mapped('price_subtotal')))"/>
                                        </td>
                                        <td></td>
                                        <td>
                                            <t t-esc="'{:,.2f}'.format((sum(doc.invoice_line_ids.mapped('price_total')) - sum(doc.invoice_line_ids.mapped('price_subtotal')))/2)"/>
                                        </td>
                                        <td></td>
                                        <td>
                                            <t t-esc="'{:,.2f}'.format((sum(doc.invoice_line_ids.mapped('price_total')) - sum(doc.invoice_line_ids.mapped('price_subtotal')))/2)"/>
                                        </td>
                                    </tr>
                                    <!-- Invoice Total in Figure -->
                                    <t t-if="doc.nhcl_invoice_type == 'cam'">
                                        <tr>
                                            <td>
                                                <strong>Total Invoice Value (In Figure)</strong>
                                            </td>
                                            <td colspan="12" style="text-align: left;">
                                                <span t-esc="'{:,.2f}'.format(abs(doc.amount_total_signed))"/>
                                            </td>
                                        </tr>
                                        <!-- Invoice Total in Words -->
                                        <tr>
                                            <td>
                                                <strong>Total Invoice Value (In Words)</strong>
                                            </td>
                                            <td colspan="12" style="text-align: left;">
                                                <span t-esc="doc.amount_in_words"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-else="">
                                        <tr>
                                            <td>
                                                <strong>Total Invoice Value (In Figure)</strong>
                                            </td>
                                            <td colspan="9" style="text-align: left;">
                                                <span t-esc="'{:,.2f}'.format(abs(doc.amount_total_signed))"/>
                                            </td>
                                        </tr>
                                        <!-- Invoice Total in Words -->
                                        <tr>
                                            <td>
                                                <strong>Total Invoice Value (In Words)</strong>
                                            </td>
                                            <td colspan="12" style="text-align: left;">
                                                <span t-esc="doc.amount_in_words"/>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </main>
                    <strong>Note</strong>
                    <br/>
                    <span style="font-family:Verdana, Arial, sans-serif; font-size: 10px; margin: 0; padding: 0;">
                        <t t-if="doc.nhcl_invoice_type == 'cam'">
                            <p style="font-family:Verdana, Arial, sans-serif; font-size: 9px;">
                                1. Please Make Payment Through RTGS as per details below.

                                <span t-field="company.name"/>-10846381193-SBIN0000952-SBI-Rednam Gardens."
                                <br/>

                                2. Amount billed to be settled before due date. Delay in payment will Attract Interest
                                as per
                                the Lease Agreement and other penal provisions or as per management policy.
                                <br/>
                                3. Any clarifications regarding bill should be notified to the mall office within 2
                                days, else
                                its considered your acceptance.
                                <br/>
                                4. Non settlement of the utility charges by the due date will lead to surcharge and
                                disconnection.

                                As the Energy Meter is Automatically resettled to 0, two meter reading are mentioned
                                above.

                                ** As per APEPDCL Regulatory Commission Act, there is hike in unit rate (Fuel Surcharges
                                Levied)
                            </p>

                        </t>
                        <t t-else="">
                            <p style="font-family:Verdana, Arial, sans-serif; font-size: 9px;">
                                1. Please Make Payment Through RTGS as per details below
                                <span t-field="company.name"/>-10846381193-S81N0000952-5Bl-Rednam
                                Gardens."
                                <br/>
                                2. Cheque/D.D in favour of Chandana Brothers Multi Complex Private Limited - 10845381193
                                -
                                SBI-Rednam Gardens.
                                <br/>
                                3.Amount billed to be settled before due date. Delay in payment will Attract interest as
                                per
                                the
                                Lease Agreement and other penal provisions
                                or as per management policy.
                                4.Any clarifications regarding bill should be notified to the mall office within 2
                                days,else
                                its
                                considered your acceptance.
                            </p>
                        </t>
                        <p style="font-family:Verdana, Arial, sans-serif; font-size: 10px;">
                            <b style="font-family:Verdana, Arial, sans-serif; font-size: 10px;">
                                In case you have any clarifications, please get in touch with the undersigned by email
                                ID as
                                below:
                                admin@cmrcentral.in/ accounts@cmrcentral.in/ technical@cmrcentral.in
                            </b>
                        </p>
                    </span>
                    <div class="col">
                        <p style="margin-left:570px; font-size: 12px; font-family: Arial, sans-serif;">
                            <b>For Chandana Brothers Multi Complex Private Limited,</b>
                        </p>
                        <br/>
                        <p style="margin-left:680px; font-size: 12px; font-family: Arial, sans-serif;">
                            <strong>Authorized Signature</strong>
                        </p>
                    </div>
                </t>
            </t>
        </template>

        <record id="tenancy_account_invoice_customise12" model="ir.actions.report">
            <field name="name">Tax Invoice Without Header</field>
            <field name="model">account.move</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">nhcl_rental_management.final_invoice_report_account_without_header</field>
            <field name="report_file">nhcl_rental_management.final_invoice_report_account_without_header</field>
            <field name="binding_model_id" ref="account.model_account_move"/>
            <field name="binding_type">report</field>
        </record>
    </data>
</odoo>