<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!--in rent invoice adding some fields-->
    <record id="view_add_invoice" model="ir.ui.view">
        <field name="name">invoice.add</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet/group//group[@id='header_left_group']" position="inside">
                <field name="nhcl_invoice_type" invisible="move_type not in ['out_invoice','out_refund']"
                       readonly="state != 'draft'"/>
                <field name="cam_fields" invisible="1"/>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list/field[@name='product_id']"
                   position="after">
                <field name="opening_reading" column_invisible="parent.cam_fields != True"
                       readonly="parent.state != 'draft'"/>
                <field name="closing_reading" column_invisible="parent.cam_fields != True"
                       readonly="parent.state != 'draft'"/>
                <field name="consumption" column_invisible="parent.cam_fields != True"
                       readonly="parent.state != 'draft'"/>
                <field name="consumed_units" column_invisible="parent.cam_fields != True"
                       readonly="parent.state != 'draft'"/>
                <field name="nhcl_area_units" column_invisible="0" readonly="parent.state != 'draft'"/>
            </xpath>
            <xpath expr="//button[@name='button_draft']" position="attributes">
                <attribute name="invisible">payment_state == 'partial' or payment_state == 'in_payment' or payment_state == 'paid'</attribute>
            </xpath>


            <!--            <xpath expr="//header" position="inside">-->
            <!--                <button name="action_approve" type="object" string="Approve" groups="nhcl_rental_management.group_account_approval"-->
            <!--                        invisible="for_ammount"/>-->
            <!--            </xpath>-->
            <!--            <xpath expr="///form/sheet/group//group[@id='header_left_group']" position="inside">-->
            <!--                <field name="for_ammount" invisible="1"/>-->
            <!--                <field name="check_post" invisible="1"/>-->
            <!--            </xpath>-->
            <!--            <xpath expr="//header//button[2]" position="attributes">-->
            <!--                <attribute name="invisible">(not for_ammount and (state ,'!=','approve','posted')) or check_post </attribute>-->
            <!--            </xpath>-->
        </field>
    </record>
    <record id="view_add_invoice_account_inherit" model="ir.ui.view">
        <field name="name">Account.reset.inherit</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_draft']" position="attributes">
                <attribute name="invisible">('state', '=', 'paid')</attribute>
            </xpath>
        </field>
    </record>

</odoo>